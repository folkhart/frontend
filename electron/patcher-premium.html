<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Folkhart Launcher</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Press Start 2P', 'Courier New', monospace;
      background: #000;
      color: #fef3c7;
      overflow: hidden;
      user-select: none;
    }

    .background {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #1c1917 0%, #292524 50%, #1c1917 100%);
      opacity: 0.95;
    }

    .background::before {
      content: '';
      position: absolute;
      inset: 0;
      background: 
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(217, 119, 6, 0.03) 2px,
          rgba(217, 119, 6, 0.03) 4px
        );
      animation: scan 8s linear infinite;
    }

    @keyframes scan {
      0% { transform: translateY(0); }
      100% { transform: translateY(100%); }
    }

    /* Floating particles */
    @keyframes float {
      0%, 100% { transform: translateY(0px) translateX(0px); opacity: 0.5; }
      50% { transform: translateY(-20px) translateX(10px); opacity: 0.8; }
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #fbbf24;
      border-radius: 50%;
      opacity: 0;
      animation: float 8s ease-in-out infinite;
    }

    .container {
      position: relative;
      width: 1000px;
      height: 650px;
      display: flex;
      border: 4px solid #d97706;
      box-shadow: 
        0 0 0 2px #1c1917,
        0 0 40px rgba(217, 119, 6, 0.6),
        inset 0 0 60px rgba(0, 0, 0, 0.5);
    }

    /* Left Sidebar */
    .sidebar {
      width: 200px;
      background: linear-gradient(180deg, #292524 0%, #1c1917 100%);
      border-right: 4px solid #d97706;
      display: flex;
      flex-direction: column;
      padding: 20px 15px;
      gap: 12px;
    }

    .logo-section {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 2px solid #d97706;
    }

    .logo-section img {
      width: 80px;
      height: 80px;
      image-rendering: pixelated;
      filter: drop-shadow(0 4px 8px rgba(217, 119, 6, 0.5));
      margin-bottom: 10px;
    }

    .logo-text {
      font-size: 16px;
      color: #fbbf24;
      text-shadow: 
        2px 2px 0 #000,
        0 0 10px rgba(251, 191, 36, 0.5);
      letter-spacing: 2px;
    }

    .sidebar-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: linear-gradient(180deg, #44403c 0%, #292524 100%);
      border: 2px solid #78716c;
      color: #fef3c7;
      font-size: 8px;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      box-shadow: 
        0 2px 0 #1c1917,
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .sidebar-btn:hover {
      background: linear-gradient(180deg, #d97706 0%, #b45309 100%);
      border-color: #fbbf24;
      transform: translateY(-2px);
      box-shadow: 
        0 4px 0 #1c1917,
        0 0 15px rgba(217, 119, 6, 0.6);
    }

    .sidebar-btn img {
      width: 20px;
      height: 20px;
      image-rendering: pixelated;
    }

    .server-status {
      margin-top: auto;
      padding: 12px;
      background: rgba(28, 25, 23, 0.8);
      border: 2px solid #65a30d;
      text-align: center;
    }

    .status-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #84cc16;
      border-radius: 50%;
      margin-right: 8px;
      box-shadow: 0 0 10px #84cc16;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .status-text {
      font-size: 7px;
      color: #84cc16;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: linear-gradient(180deg, #44403c 0%, #292524 100%);
    }

    /* Header */
    .header {
      background: linear-gradient(90deg, #b45309 0%, #92400e 100%);
      padding: 20px;
      border-bottom: 4px solid #fbbf24;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 0 rgba(0, 0, 0, 0.3);
    }

    .header-title {
      font-size: 20px;
      color: #fbbf24;
      text-shadow: 
        3px 3px 0 #000,
        0 0 20px rgba(251, 191, 36, 0.5);
      letter-spacing: 3px;
    }

    .close-btn {
      background: #1c1917;
      color: #fbbf24;
      border: 3px solid #fbbf24;
      padding: 8px 16px;
      cursor: pointer;
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s;
      box-shadow: 0 3px 0 #000;
    }

    .close-btn:hover {
      background: #d97706;
      color: #fff;
      transform: translateY(-2px);
      box-shadow: 
        0 5px 0 #000,
        0 0 15px rgba(217, 119, 6, 0.8);
    }

    .close-btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 0 #000;
    }

    /* Content Area */
    .content-wrapper {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* Game Status */
    .status-card {
      background: rgba(28, 25, 23, 0.9);
      border: 3px solid #d97706;
      padding: 20px;
      box-shadow: 
        0 4px 0 #1c1917,
        inset 0 2px 0 rgba(255, 255, 255, 0.1);
    }

    .status-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #d97706;
    }

    .status-icon {
      width: 24px;
      height: 24px;
      image-rendering: pixelated;
    }

    .status-title {
      font-size: 12px;
      color: #fbbf24;
      text-shadow: 2px 2px 0 #000;
    }

    .status-text {
      font-size: 9px;
      color: #fef3c7;
      line-height: 1.8;
      margin-bottom: 8px;
    }

    .version-badge {
      display: inline-block;
      background: #65a30d;
      color: #fff;
      padding: 4px 12px;
      font-size: 8px;
      border: 2px solid #84cc16;
      box-shadow: 0 2px 0 #000;
    }

    /* News Section */
    .news-card {
      background: rgba(28, 25, 23, 0.9);
      border: 3px solid #65a30d;
      padding: 20px;
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 
        0 4px 0 #1c1917,
        inset 0 2px 0 rgba(255, 255, 255, 0.1);
    }

    .news-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #65a30d;
    }

    .news-list {
      flex: 1;
      overflow-y: auto;
      padding-right: 10px;
    }

    .news-item {
      background: rgba(68, 64, 60, 0.5);
      border-left: 4px solid #d97706;
      padding: 12px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .news-item:hover {
      background: rgba(68, 64, 60, 0.8);
      border-left-color: #fbbf24;
      transform: translateX(4px);
      box-shadow: -4px 0 0 #fbbf24;
    }

    .news-badge {
      display: inline-block;
      background: #d97706;
      color: #fff;
      padding: 2px 8px;
      font-size: 7px;
      border: 1px solid #fbbf24;
      margin-bottom: 6px;
      box-shadow: 0 2px 0 #000;
    }

    .news-title {
      font-size: 9px;
      color: #fef3c7;
      line-height: 1.6;
      margin-bottom: 4px;
    }

    .news-date {
      font-size: 7px;
      color: #84cc16;
    }

    /* Progress Bar */
    .progress-section {
      padding: 0 20px 20px;
    }

    .progress-bar {
      width: 100%;
      height: 35px;
      background: #1c1917;
      border: 3px solid #d97706;
      position: relative;
      overflow: hidden;
      box-shadow: 
        inset 0 3px 6px rgba(0, 0, 0, 0.7),
        0 2px 0 rgba(255, 255, 255, 0.1);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #d97706 0%, #f59e0b 50%, #fbbf24 100%);
      width: 0%;
      transition: width 0.4s ease;
      position: relative;
      box-shadow: 
        inset 0 2px 0 rgba(255, 255, 255, 0.3),
        0 0 20px rgba(217, 119, 6, 0.5);
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255, 255, 255, 0.1) 10px,
        rgba(255, 255, 255, 0.1) 20px
      );
      animation: progress-animation 1s linear infinite;
    }

    @keyframes progress-animation {
      0% { transform: translateX(0); }
      100% { transform: translateX(28px); }
    }

    .progress-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 10px;
      color: #fef3c7;
      text-shadow: 
        2px 2px 0 #000,
        -1px -1px 0 #000,
        1px -1px 0 #000,
        -1px 1px 0 #000;
      z-index: 10;
      font-weight: bold;
    }

    /* Buttons */
    .button-section {
      padding: 0 20px 20px;
      display: flex;
      gap: 15px;
    }

    .btn {
      flex: 1;
      padding: 18px;
      font-family: inherit;
      font-size: 12px;
      border: 4px solid #fff;
      cursor: pointer;
      text-transform: uppercase;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
      letter-spacing: 2px;
      box-shadow: 
        0 6px 0 #000,
        0 8px 20px rgba(0, 0, 0, 0.5);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-play {
      background: linear-gradient(180deg, #84cc16 0%, #65a30d 100%);
      color: #fff;
      text-shadow: 2px 2px 0 #000;
      border-color: #84cc16;
    }

    .btn-play:hover:not(:disabled) {
      background: linear-gradient(180deg, #a3e635 0%, #84cc16 100%);
      transform: translateY(-3px);
      box-shadow: 
        0 9px 0 #000,
        0 12px 25px rgba(132, 204, 22, 0.5);
    }

    .btn-play:active:not(:disabled) {
      transform: translateY(3px);
      box-shadow: 
        0 3px 0 #000,
        0 4px 10px rgba(132, 204, 22, 0.5);
    }

    .btn-settings {
      background: linear-gradient(180deg, #d97706 0%, #b45309 100%);
      color: #fff;
      text-shadow: 2px 2px 0 #000;
      border-color: #fbbf24;
    }

    .btn-settings:hover {
      background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
      transform: translateY(-3px);
      box-shadow: 
        0 9px 0 #000,
        0 12px 25px rgba(217, 119, 6, 0.5);
    }

    .btn-settings:active {
      transform: translateY(3px);
      box-shadow: 
        0 3px 0 #000,
        0 4px 10px rgba(217, 119, 6, 0.5);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      filter: grayscale(0.5);
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 12px;
    }

    ::-webkit-scrollbar-track {
      background: #1c1917;
      border: 2px solid #d97706;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #d97706 0%, #b45309 100%);
      border: 2px solid #fbbf24;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);
    }

    .version-info {
      position: absolute;
      bottom: 8px;
      right: 12px;
      font-size: 7px;
      color: rgba(251, 191, 36, 0.6);
      z-index: 100;
    }
  </style>
</head>
<body>
  <!-- Background with particles -->
  <div class="background">
    <!-- Generate particles -->
    <div class="particle" style="left: 10%; top: 20%; animation-delay: 0s;"></div>
    <div class="particle" style="left: 85%; top: 15%; animation-delay: 1s;"></div>
    <div class="particle" style="left: 40%; top: 60%; animation-delay: 2s;"></div>
    <div class="particle" style="left: 70%; top: 40%; animation-delay: 3s;"></div>
    <div class="particle" style="left: 20%; top: 80%; animation-delay: 4s;"></div>
  </div>

  <div class="container">
    <!-- Left Sidebar -->
    <div class="sidebar">
      <div class="logo-section">
        <img src="../src/assets/ui/logo.png" alt="Folkhart" />
        <div class="logo-text">FOLKHART</div>
      </div>

      <a href="#" class="sidebar-btn" onclick="openDiscord(); return false;">
        <img src="../src/assets/ui/discord.png" alt="Discord" />
        <span>DISCORD</span>
      </a>

      <a href="#" class="sidebar-btn" onclick="openReddit(); return false;">
        <img src="../src/assets/ui/reddit.png" alt="Reddit" />
        <span>REDDIT</span>
      </a>

      <a href="#" class="sidebar-btn" onclick="openWebsite(); return false;">
        <img src="../src/assets/ui/world.png" alt="Website" />
        <span>WEBSITE</span>
      </a>

      <a href="#" class="sidebar-btn" onclick="openSettings(); return false;">
        <img src="../src/assets/ui/settings.png" alt="Settings" />
        <span>SETTINGS</span>
      </a>

      <div class="server-status">
        <div class="status-dot"></div>
        <div class="status-text" id="serverStatus">SERVER ONLINE</div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="header">
        <div class="header-title">⚔️ GAME LAUNCHER</div>
        <button class="close-btn" onclick="closeWindow()">✕</button>
      </div>

      <div class="content-wrapper">
        <!-- Game Status Card -->
        <div class="status-card">
          <div class="status-header">
            <img src="../src/assets/ui/adventure.png" class="status-icon" alt="Status" />
            <div class="status-title">GAME STATUS</div>
          </div>
          <div class="status-text" id="statusText">
            Checking for updates...
          </div>
          <span class="version-badge" id="versionBadge">v0.1.0</span>
        </div>

        <!-- News Card -->
        <div class="news-card">
          <div class="news-header">
            <img src="../src/assets/ui/news/news.png" class="status-icon" alt="News" />
            <div class="status-title">NEWS & UPDATES</div>
          </div>
          <div class="news-list" id="newsList">
            <div class="news-item">
              <span class="news-badge">LOADING</span>
              <div class="news-title">Fetching latest news...</div>
              <div class="news-date">Please wait</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="progress-section">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
          <div class="progress-text" id="progressText">READY</div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="button-section">
        <button class="btn btn-play" id="playBtn" onclick="launchGame()" disabled>
          ▶ PLAY GAME
        </button>
        <button class="btn btn-settings" onclick="openSettings()">
          ⚙ SETTINGS
        </button>
      </div>
    </div>

    <div class="version-info" id="versionInfo">v0.1.0</div>
  </div>

  <script>
    const { ipcRenderer } = require('electron');

    // Hide images that fail to load
    window.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('img').forEach(img => {
        img.onerror = function() {
          this.style.display = 'none';
          // Add text fallback for sidebar buttons
          const btn = this.closest('.sidebar-btn');
          if (btn) {
            this.parentElement.style.justifyContent = 'center';
          }
        };
      });
      
      ipcRenderer.send('patcher-ready');
    });

    // Event handlers
    ipcRenderer.on('update-status', (event, message) => {
      document.getElementById('statusText').innerHTML = message;
    });

    ipcRenderer.on('update-progress', (event, percent, text) => {
      document.getElementById('progressFill').style.width = percent + '%';
      document.getElementById('progressText').textContent = text || (percent + '%');
    });

    ipcRenderer.on('update-version', (event, version) => {
      document.getElementById('versionBadge').textContent = `v${version}`;
      document.getElementById('versionInfo').textContent = `v${version}`;
    });

    ipcRenderer.on('set-play-button', (event, enabled) => {
      document.getElementById('playBtn').disabled = !enabled;
    });

    // Update news from real API
    ipcRenderer.on('update-news', (event, newsItems) => {
      const newsList = document.getElementById('newsList');
      if (newsItems && newsItems.length > 0) {
        newsList.innerHTML = newsItems.map(item => `
          <div class="news-item">
            <span class="news-badge">${item.category || 'NEWS'}</span>
            <div class="news-title">${item.title}</div>
            <div class="news-date">${item.date}</div>
          </div>
        `).join('');
      }
    });

    // Social links
    function openDiscord() {
      ipcRenderer.send('open-url', 'https://discord.gg/tzT36qXbWr');
    }

    function openReddit() {
      ipcRenderer.send('open-url', 'https://www.reddit.com/r/folkhart/');
    }

    function openWebsite() {
      ipcRenderer.send('open-url', 'https://folkhart.com');
    }

    function launchGame() {
      ipcRenderer.send('launch-game');
    }

    function openSettings() {
      ipcRenderer.send('open-settings');
    }

    function closeWindow() {
      ipcRenderer.send('close-patcher');
    }
  </script>
</body>
</html>
